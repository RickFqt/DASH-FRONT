<div class="container">
	<!-- Bloco 1: Lateral fixa com logo e botão -->
	<div class="sidebar">
		<img src="DASH_logo.png" alt="Logo" class="logo">
		<a [routerLink]="['/home']">
      <img class="back-button"
        [ngClass]="{ 'flipped': true }"
        [src]="buttonSrc" 
        alt="Botão"
        (mouseenter)="onHoverButton()"
        (mouseleave)="onLeaveButton()">
    </a>
	</div>

	<!-- Bloco 2: Principal com as informações do formulário -->
	<div class="main-content">

    <div *ngIf="mostrarPopUp" class="popup-overlay" (click)="fecharPopUp()">
      <div class="popup-content" (click)="$event.stopPropagation()">
        <span class="close" (click)="fecharPopUp()">&times;</span>
        <p>{{ mensagemSucesso }}</p>
      </div>
    </div>

    <div class="header">
      <h1 class="title">{{ prontuario.nome }} <span *ngIf="prontuario.ehTemplate">&#64;Template</span></h1>
      <span>
        <img *ngIf="prontuario.ehTemplate" src="plus_sign.svg" alt="Criar prontuario a partir de template" class="top-right-buttons plus-button"
        (click)="makeProntuarioFromTemplate()">
        <img *ngIf="!prontuario.ehTemplate" src="edit_icon.svg" alt="Responder prontuario" class="top-right-buttons edit-button"
        (click)="changeProntuarioState('respondendo')">
        <img src="eye_icon.svg" alt="Visualizar prontuario" class="top-right-buttons plus-button"
        (click)="changeProntuarioState('visualizacao')">
        <img src="copy_icon.svg" alt="Duplicar prontuario" class="top-right-buttons copy-button"
        (click)="makeProntuarioCopy()">
      </span>
      <!-- <button class="top-right-button">Clique aqui</button> -->
    </div>
    <!-- <div class="header">
    </div> -->
    <!-- Título -->
    
    <!-- Descrição -->
    <p class="description">{{ prontuario.descricao }}</p>

    <hr class="section-separator">
    
    <!-- Seções -->
    <div class="sections" *ngFor="let section of prontuario.secoes; let i = index">
      <app-section 
        [section]="section" 
        [sectionIndex]="(i + 1).toString()" 
        [estadoProntuario]="estadoProntuario"
        (secaoAtualizada)="refreshProntuario()"
        (subSecaoCriada)="refreshProntuario()"
        (respostaAtualizada)="refreshProntuario()"
        (criarResposta)="salvarResposta($event)">
      </app-section>
      <hr class="section-separator">
    </div>

    <!-- Container para adicionar novas seções -->
    <div *ngIf="estadoProntuario === 'editando'" class="add-section-container">
      <input type="text" placeholder="Título da nova seção" [(ngModel)]="novaSecaoTitulo" class="new-section-input" />
      <button (click)="adicionarSecao()" class="add-section-button">Adicionar Seção</button>
    </div>

    <!-- Botão de salvar resposta-->
    <div *ngIf="estadoProntuario === 'respondendo'" class="action-buttons">
      <button (click)="salvarRespostas()" class="btn btn-primary">Salvar Respostas</button>
    </div>

    <!-- Debug button -->
    <!-- <div class="action-buttons">
      <button (click)="changeProntuarioStateDebug()" class="btn btn-primary">Change State</button>
    </div> -->
  </div>

</div>
  